- set_meta_tags title: @trip.title
:ruby
  show_new_day_link = can?(:create, Day) && trip_first_available_slot(@trip).present?

%section
  .header{class: "#{show_new_day_link ? '' : 'text-center'}"}
    %h3.d-inline= @trip.title
    - if show_new_day_link
      .float-end.mt-1= link_to t("day.new"), new_trip_day_path(@trip), class: "btn btn-primary btn-sm"
    %h5.text-muted= trip_duration(@trip)
  .body
    - if @trip.days.any?
      .row
        %div{class: Sni::Center.call(xl: 6, lg: 8, md: 10, sm: 12)}
          %table.mt-4{class: "table table-bordered table-sm"}
            %thead
              %tr
                %th.text-center= t("day.day")
                %th.text-center= t("day.date")
                %th= t("day.title")
                %th.text-center= t("day.ready")
            %tbody
              - @trip.days.each do |day|
                %tr
                  %td.text-center= link_to day_label(day), trip_day_path(@trip, day)
                  %td.text-center= day_date(day)
                  %td= truncate(day.title, length: 40)
                  %td.text-center= render "days/draft_badge", day: day
    - elsif can?(:create, Day)
      %p.text-muted No days yet.
  .footer
    - if can?(:edit, @trip)
      = link_to t("edit"), edit_trip_path(@trip), class: "btn btn-primary btn-sm"
    = link_to t("trip.trips"), trips_path, class: "btn btn-success btn-sm"
